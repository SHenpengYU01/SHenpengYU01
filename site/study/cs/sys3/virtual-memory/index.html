
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A site for learning and sharing.">
      
      
      
        <link rel="canonical" href="https://note.mythlogos.top/study/cs/sys3/virtual-memory/">
      
      
        <link rel="prev" href="../main-memory/">
      
      
        <link rel="next" href="../file-sys/">
      
      
      <link rel="icon" href="../../../../img/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.12">
    
    
      
        <title>Virtual Memory - Cool Tea</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.2afb09e1.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="https://unpkg.com/katex@0/dist/katex.min.css">
    
      <link rel="stylesheet" href="../../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="youtube" data-md-color-primary="blue-grey" data-md-color-accent="blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../.." title="Cool Tea" class="md-header__button md-logo" aria-label="Cool Tea" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 19h16v2H4zM20 8V5h-2v3zm0-5c.6 0 1 .2 1.4.6s.6.9.6 1.4v3c0 .6-.2 1-.6 1.4s-.8.6-1.4.6h-2v3c0 1.1-.4 2-1.2 2.8S15.1 17 14 17H8c-1.1 0-2-.4-2.8-1.2S4 14.1 4 13V3h5v2.4L7.2 6.8c-.1.1-.2.3-.2.4v4.3c0 .3.2.5.5.5h4c.3 0 .5-.2.5-.5V7.2c0-.2-.1-.3-.2-.4L10 5.4V3z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Cool Tea
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Virtual Memory
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="youtube" data-md-color-primary="blue-grey" data-md-color-accent="blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="blue-grey" data-md-color-accent="blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256l137.3-137.4c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/SHenpengYU01/SHenpengYU01" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    cool-tea
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../math/" class="md-tabs__link">
          
  
  
    
  
  Maths

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
  
    
  
  Computer Science

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../web/" class="md-tabs__link">
          
  
  
    
  
  Web

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../ailogic/" class="md-tabs__link">
          
  
  
    
  
  AI

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../oop/" class="md-tabs__link">
          
  
  
    
  
  Programming

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../about/" class="md-tabs__link">
        
  
  
    
  
  About

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../test/" class="md-tabs__link">
        
  
  
    
  
  Test

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../link/" class="md-tabs__link">
        
  
  
    
  
  Links

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="Cool Tea" class="md-nav__button md-logo" aria-label="Cool Tea" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 19h16v2H4zM20 8V5h-2v3zm0-5c.6 0 1 .2 1.4.6s.6.9.6 1.4v3c0 .6-.2 1-.6 1.4s-.8.6-1.4.6h-2v3c0 1.1-.4 2-1.2 2.8S15.1 17 14 17H8c-1.1 0-2-.4-2.8-1.2S4 14.1 4 13V3h5v2.4L7.2 6.8c-.1.1-.2.3-.2.4v4.3c0 .3.2.5.5.5h4c.3 0 .5-.2.5-.5V7.2c0-.2-.1-.3-.2-.4L10 5.4V3z"/></svg>

    </a>
    Cool Tea
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/SHenpengYU01/SHenpengYU01" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    cool-tea
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../math/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Maths
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Maths
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../math/linear%20algebra/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Linear Algebra
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            Linear Algebra
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../math/linear%20algebra/linear%20algebra/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Startup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../math/linear%20algebra/SVD/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SVD
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../math/maths%20analysis/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Mathematics Analysis
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Mathematics Analysis
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../math/maths%20analysis/maths%20analysis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Startup
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../math/discrete/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Discrete Mathematics
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            Discrete Mathematics
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../math/discrete/discrete%20maths/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Startup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../math/discrete/quadratic-probing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    二次剩余
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../math/probability/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Probability Theory
    
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5">
            <span class="md-nav__icon md-icon"></span>
            Probability Theory
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Computer Science
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Computer Science
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../sys2/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Computer system2
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Computer system2
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sys2/sys2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Summary
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Computer system3
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            Computer system3
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../quantitative/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Quantitative Approaches
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ILP/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Instruction Level Parallelism
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../simd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SIMD
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mimd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MIMD
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cache/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cache
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../memory/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Memory
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../main-memory/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Main Memory
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Virtual Memory
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Virtual Memory
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#demand-paging" class="md-nav__link">
    <span class="md-ellipsis">
      按需分页（Demand Paging）
    </span>
  </a>
  
    <nav class="md-nav" aria-label="按需分页（Demand Paging）">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    <span class="md-ellipsis">
      1. 工作原理
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. 工作原理">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      核心流程
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    <span class="md-ellipsis">
      2. 具体示例
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. 具体示例">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      步骤分解
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    <span class="md-ellipsis">
      3. 关键数据结构
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. 关键数据结构">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pte" class="md-nav__link">
    <span class="md-ellipsis">
      页表项（PTE）标志位
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      缺页异常处理流程
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4" class="md-nav__link">
    <span class="md-ellipsis">
      4. 优点与缺点
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      性能优化
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#copy-on-write" class="md-nav__link">
    <span class="md-ellipsis">
      写时复制（copy on write）
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#swap-space" class="md-nav__link">
    <span class="md-ellipsis">
      内存交换分区（swap space）
    </span>
  </a>
  
    <nav class="md-nav" aria-label="内存交换分区（swap space）">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      核心作用
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      工作原理
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      典型使用场景
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      优缺点对比
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#page-replacement" class="md-nav__link">
    <span class="md-ellipsis">
      页替换（Page replacement）
    </span>
  </a>
  
    <nav class="md-nav" aria-label="页替换（Page replacement）">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      页替换算法
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      算法对比示例
    </span>
  </a>
  
    <nav class="md-nav" aria-label="算法对比示例">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fifo" class="md-nav__link">
    <span class="md-ellipsis">
      FIFO
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lru" class="md-nav__link">
    <span class="md-ellipsis">
      LRU
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clock" class="md-nav__link">
    <span class="md-ellipsis">
      Clock算法
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#linux" class="md-nav__link">
    <span class="md-ellipsis">
      实际系统中的页替换（以Linux为例）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      页替换的性能影响
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#allocations-of-frames" class="md-nav__link">
    <span class="md-ellipsis">
      帧分配（Allocations of frames）
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#thrashing" class="md-nav__link">
    <span class="md-ellipsis">
      抖动（Thrashing）
    </span>
  </a>
  
    <nav class="md-nav" aria-label="抖动（Thrashing）">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-thrashing" class="md-nav__link">
    <span class="md-ellipsis">
      1. Thrashing的定义
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2_1" class="md-nav__link">
    <span class="md-ellipsis">
      2. 发生原因
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3_1" class="md-nav__link">
    <span class="md-ellipsis">
      3. 影响
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5" class="md-nav__link">
    <span class="md-ellipsis">
      5. 解决方案
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. 解决方案">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_1" class="md-nav__link">
    <span class="md-ellipsis">
      (1) 短期缓解
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2_2" class="md-nav__link">
    <span class="md-ellipsis">
      (2) 长期优化
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3_2" class="md-nav__link">
    <span class="md-ellipsis">
      (3) 系统级策略
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7-belady" class="md-nav__link">
    <span class="md-ellipsis">
      7. 与Belady异常的区别
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      内核内存分配
    </span>
  </a>
  
    <nav class="md-nav" aria-label="内核内存分配">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_2" class="md-nav__link">
    <span class="md-ellipsis">
      1. 内核内存分配与用户态分配的区别
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2_3" class="md-nav__link">
    <span class="md-ellipsis">
      2. 内核内存分配的核心机制
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. 内核内存分配的核心机制">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-buddy-system" class="md-nav__link">
    <span class="md-ellipsis">
      (1) 伙伴系统（Buddy System）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-slabslubslob" class="md-nav__link">
    <span class="md-ellipsis">
      (2) Slab/Slub/Slob分配器
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-api" class="md-nav__link">
    <span class="md-ellipsis">
      3. 内核内存分配API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. 内核内存分配API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-kmalloc-kfree" class="md-nav__link">
    <span class="md-ellipsis">
      (1) kmalloc / kfree
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-vmalloc-vfree" class="md-nav__link">
    <span class="md-ellipsis">
      (2) vmalloc / vfree
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-get_free_pages" class="md-nav__link">
    <span class="md-ellipsis">
      (3) get_free_pages
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4_1" class="md-nav__link">
    <span class="md-ellipsis">
      4. 内核内存分配策略与优化
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. 内核内存分配策略与优化">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_3" class="md-nav__link">
    <span class="md-ellipsis">
      (1) 内存碎片处理
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-kswapd" class="md-nav__link">
    <span class="md-ellipsis">
      (2) 内存回收（kswapd）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-oomout-of-memory" class="md-nav__link">
    <span class="md-ellipsis">
      (3) OOM（Out-Of-Memory）处理
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5_1" class="md-nav__link">
    <span class="md-ellipsis">
      5. 调试与监控工具
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. 调试与监控工具">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-procmeminfo" class="md-nav__link">
    <span class="md-ellipsis">
      (1) /proc/meminfo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-procslabinfo" class="md-nav__link">
    <span class="md-ellipsis">
      (2) /proc/slabinfo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-vmstat" class="md-nav__link">
    <span class="md-ellipsis">
      (3) vmstat
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-kmemleak" class="md-nav__link">
    <span class="md-ellipsis">
      (4) kmemleak（内核内存泄漏检测）
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6" class="md-nav__link">
    <span class="md-ellipsis">
      6. 实际案例：内核模块中的内存分配
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7" class="md-nav__link">
    <span class="md-ellipsis">
      7. 总结
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../file-sys/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    File System
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../storage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Storage Structure
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../io/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    IO
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../network/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Network
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            Network
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../network/introduction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../network/application%20layer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    The Application Layer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../network/transport%20layer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    The Transport Layer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../network/internet%20layer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    The Internet Layer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../network/link%20layer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    The Link Layer
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../web/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Web
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Web
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    JavaScript
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            JavaScript
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../web/JS/intro/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    基础语法
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../web/JS/func/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    函数
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../web/JS/event/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    事件
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../web/JS/class/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    类
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../web/JS/array/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    数组
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    AI
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            AI
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../ailogic/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    AI Logic
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5_1" id="__nav_5_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1">
            <span class="md-nav__icon md-icon"></span>
            AI Logic
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ailogic/introduction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    引论
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1_3" >
        
          
          <label class="md-nav__link" for="__nav_5_1_3" id="__nav_5_1_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    经典演绎逻辑
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_1_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1_3">
            <span class="md-nav__icon md-icon"></span>
            经典演绎逻辑
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ailogic/proposition/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    命题逻辑
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ailogic/first-order-logic/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    一阶逻辑
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ailogic/knowledge/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    知识图谱与描述逻辑
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1_4" >
        
          
          <label class="md-nav__link" for="__nav_5_1_4" id="__nav_5_1_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    非单调逻辑
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_1_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1_4">
            <span class="md-nav__icon md-icon"></span>
            非单调逻辑
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ailogic/default-logic/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    缺省逻辑
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ailogic/asp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    回答集编程
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1_5" >
        
          
          <label class="md-nav__link" for="__nav_5_1_5" id="__nav_5_1_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    基于论证的逻辑
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_1_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1_5">
            <span class="md-nav__icon md-icon"></span>
            基于论证的逻辑
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ailogic/argument/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    经典抽象论辩理论
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ailogic/struct-argu/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    结构化论辩理论
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ailogic/game/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    论辩语义的计算方法
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1_6" >
        
          
          <label class="md-nav__link" for="__nav_5_1_6" id="__nav_5_1_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    不确定推理
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_1_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1_6">
            <span class="md-nav__icon md-icon"></span>
            不确定推理
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ailogic/bayes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    贝叶斯网络
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Programming
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Programming
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../oop/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    OOP
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1" id="__nav_6_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1">
            <span class="md-nav__icon md-icon"></span>
            OOP
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../oop/grammar/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    C++ 基础语法
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1_3" >
        
          
          <label class="md-nav__link" for="__nav_6_1_3" id="__nav_6_1_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    类
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_1_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1_3">
            <span class="md-nav__icon md-icon"></span>
            类
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../oop/class/class/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    基本概念
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../oop/class/ctor/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    构造函数
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../oop/class/dtor/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    析构函数
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../oop/class/friend/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    友元函数
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../oop/class/init-list/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    初始化列表
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../oop/class/vfunc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    虚函数
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../oop/class/inherit/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    继承
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../oop/struct/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    结构体
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../oop/reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    引用
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../oop/memory/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    内存管理
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../oop/stream/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    流
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../oop/container/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    容器
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../oop/overload/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    重载
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../oop/template/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    模版
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../oop/iterators/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    迭代器
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../oop/exception/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    异常处理
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../oop/design-pattern/design-pattern/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    设计模式
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../datastructure/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Data Structure
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_2" id="__nav_6_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2">
            <span class="md-nav__icon md-icon"></span>
            Data Structure
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../datastructure/graph/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Graph
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../datastructure/midterm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Data Structure
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../datastructure/algorithm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Algorithm
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../datastructure/practice/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Practice
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../about/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    About
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../test/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Test
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../link/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Links
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#demand-paging" class="md-nav__link">
    <span class="md-ellipsis">
      按需分页（Demand Paging）
    </span>
  </a>
  
    <nav class="md-nav" aria-label="按需分页（Demand Paging）">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    <span class="md-ellipsis">
      1. 工作原理
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. 工作原理">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      核心流程
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    <span class="md-ellipsis">
      2. 具体示例
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. 具体示例">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      步骤分解
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    <span class="md-ellipsis">
      3. 关键数据结构
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. 关键数据结构">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pte" class="md-nav__link">
    <span class="md-ellipsis">
      页表项（PTE）标志位
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      缺页异常处理流程
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4" class="md-nav__link">
    <span class="md-ellipsis">
      4. 优点与缺点
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      性能优化
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#copy-on-write" class="md-nav__link">
    <span class="md-ellipsis">
      写时复制（copy on write）
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#swap-space" class="md-nav__link">
    <span class="md-ellipsis">
      内存交换分区（swap space）
    </span>
  </a>
  
    <nav class="md-nav" aria-label="内存交换分区（swap space）">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      核心作用
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      工作原理
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      典型使用场景
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      优缺点对比
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#page-replacement" class="md-nav__link">
    <span class="md-ellipsis">
      页替换（Page replacement）
    </span>
  </a>
  
    <nav class="md-nav" aria-label="页替换（Page replacement）">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      页替换算法
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      算法对比示例
    </span>
  </a>
  
    <nav class="md-nav" aria-label="算法对比示例">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fifo" class="md-nav__link">
    <span class="md-ellipsis">
      FIFO
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lru" class="md-nav__link">
    <span class="md-ellipsis">
      LRU
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clock" class="md-nav__link">
    <span class="md-ellipsis">
      Clock算法
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#linux" class="md-nav__link">
    <span class="md-ellipsis">
      实际系统中的页替换（以Linux为例）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      页替换的性能影响
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#allocations-of-frames" class="md-nav__link">
    <span class="md-ellipsis">
      帧分配（Allocations of frames）
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#thrashing" class="md-nav__link">
    <span class="md-ellipsis">
      抖动（Thrashing）
    </span>
  </a>
  
    <nav class="md-nav" aria-label="抖动（Thrashing）">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-thrashing" class="md-nav__link">
    <span class="md-ellipsis">
      1. Thrashing的定义
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2_1" class="md-nav__link">
    <span class="md-ellipsis">
      2. 发生原因
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3_1" class="md-nav__link">
    <span class="md-ellipsis">
      3. 影响
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5" class="md-nav__link">
    <span class="md-ellipsis">
      5. 解决方案
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. 解决方案">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_1" class="md-nav__link">
    <span class="md-ellipsis">
      (1) 短期缓解
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2_2" class="md-nav__link">
    <span class="md-ellipsis">
      (2) 长期优化
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3_2" class="md-nav__link">
    <span class="md-ellipsis">
      (3) 系统级策略
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7-belady" class="md-nav__link">
    <span class="md-ellipsis">
      7. 与Belady异常的区别
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      内核内存分配
    </span>
  </a>
  
    <nav class="md-nav" aria-label="内核内存分配">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_2" class="md-nav__link">
    <span class="md-ellipsis">
      1. 内核内存分配与用户态分配的区别
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2_3" class="md-nav__link">
    <span class="md-ellipsis">
      2. 内核内存分配的核心机制
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. 内核内存分配的核心机制">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-buddy-system" class="md-nav__link">
    <span class="md-ellipsis">
      (1) 伙伴系统（Buddy System）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-slabslubslob" class="md-nav__link">
    <span class="md-ellipsis">
      (2) Slab/Slub/Slob分配器
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-api" class="md-nav__link">
    <span class="md-ellipsis">
      3. 内核内存分配API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. 内核内存分配API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-kmalloc-kfree" class="md-nav__link">
    <span class="md-ellipsis">
      (1) kmalloc / kfree
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-vmalloc-vfree" class="md-nav__link">
    <span class="md-ellipsis">
      (2) vmalloc / vfree
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-get_free_pages" class="md-nav__link">
    <span class="md-ellipsis">
      (3) get_free_pages
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4_1" class="md-nav__link">
    <span class="md-ellipsis">
      4. 内核内存分配策略与优化
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. 内核内存分配策略与优化">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_3" class="md-nav__link">
    <span class="md-ellipsis">
      (1) 内存碎片处理
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-kswapd" class="md-nav__link">
    <span class="md-ellipsis">
      (2) 内存回收（kswapd）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-oomout-of-memory" class="md-nav__link">
    <span class="md-ellipsis">
      (3) OOM（Out-Of-Memory）处理
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5_1" class="md-nav__link">
    <span class="md-ellipsis">
      5. 调试与监控工具
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. 调试与监控工具">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-procmeminfo" class="md-nav__link">
    <span class="md-ellipsis">
      (1) /proc/meminfo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-procslabinfo" class="md-nav__link">
    <span class="md-ellipsis">
      (2) /proc/slabinfo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-vmstat" class="md-nav__link">
    <span class="md-ellipsis">
      (3) vmstat
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-kmemleak" class="md-nav__link">
    <span class="md-ellipsis">
      (4) kmemleak（内核内存泄漏检测）
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6" class="md-nav__link">
    <span class="md-ellipsis">
      6. 实际案例：内核模块中的内存分配
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7" class="md-nav__link">
    <span class="md-ellipsis">
      7. 总结
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="_1">虚拟内存</h1>
<h2 id="demand-paging">按需分页（Demand Paging）</h2>
<p>按需分页（Demand Paging）是一种虚拟内存管理技术，核心思想是<strong>仅在程序实际需要访问某个页面时，才将其加载到物理内存中</strong>，而非一次性加载全部页面。
它通过延迟加载（Lazy Loading）优化内存使用，减少程序启动时间和物理内存占用，是操作系统高效管理内存的核心机制之一。</p>
<h3 id="1"><strong>1. 工作原理</strong></h3>
<h4 id="_2"><strong>核心流程</strong></h4>
<ol>
<li><strong>初始状态</strong>：</li>
<li>程序的可执行文件存储在磁盘（如二进制文件），但<strong>仅加载必要部分到内存</strong>（如代码段头部）。</li>
<li>
<p>页表中大部分页表项的<strong>存在位（Present Bit）</strong>标记为<code>0</code>（表示页面不在内存中）。</p>
</li>
<li>
<p><strong>访问未加载的页面</strong>：</p>
</li>
<li>当程序访问一个标记为“不在内存”的页面时，触发<strong>缺页异常（Page Fault）</strong>。</li>
<li>
<p>操作系统接管处理流程：</p>
<ul>
<li>从磁盘（或交换空间）加载所需页面到物理内存。</li>
<li>更新页表项的存在位和物理页框号。</li>
<li>恢复程序执行，重新执行引发缺页的指令。</li>
</ul>
</li>
<li>
<p><strong>动态管理</strong>：</p>
</li>
<li>若物理内存不足，操作系统通过<strong>页面置换算法</strong>（如LRU、FIFO）淘汰旧页面，腾出空间。</li>
</ol>
<hr />
<h3 id="2"><strong>2. 具体示例</strong></h3>
<p>假设一个程序访问虚拟地址 <code>0x08048000</code>，其映射的物理页面尚未加载到内存。</p>
<h4 id="_3"><strong>步骤分解</strong></h4>
<ol>
<li><strong>触发缺页异常</strong>：</li>
<li>CPU访问虚拟地址 <code>0x08048000</code>，页表项存在位为<code>0</code>。</li>
<li>
<p>硬件触发缺页异常，切换到内核模式。</p>
</li>
<li>
<p><strong>操作系统处理缺页</strong>：</p>
</li>
<li><strong>查询页表项</strong>：确定该虚拟地址对应的磁盘位置（如可执行文件中的偏移）。</li>
<li><strong>分配物理页框</strong>：选择一个空闲页框（如物理地址 <code>0x0000A000</code>）。</li>
<li><strong>加载页面</strong>：将磁盘中 <code>0x08048000</code> 对应的数据（如代码或数据段）复制到物理页框 <code>0x0000A000</code>。</li>
<li>
<p><strong>更新页表</strong>：</p>
<ul>
<li>设置页表项的存在位为<code>1</code>，物理页框号为 <code>0x0000A</code>（高20位）。</li>
<li>更新标志位（如可读写权限）。</li>
</ul>
</li>
<li>
<p><strong>恢复程序执行</strong>：</p>
</li>
<li>CPU重新执行触发缺页的指令，此时页表项已有效，正常完成地址转换。</li>
</ol>
<hr />
<h3 id="3"><strong>3. 关键数据结构</strong></h3>
<h4 id="pte"><strong>页表项（PTE）标志位</strong></h4>
<ul>
<li><strong>存在位（Present Bit）</strong>：1表示页面在内存，0表示在磁盘。</li>
<li><strong>修改位（Dirty Bit）</strong>：1表示页面被修改过，淘汰时需写回磁盘。</li>
<li><strong>访问位（Accessed Bit）</strong>：记录页面是否被访问，用于页面置换算法。</li>
</ul>
<h4 id="_4"><strong>缺页异常处理流程</strong></h4>
<ul>
<li><strong>硬件触发</strong>：CPU检测到存在位为<code>0</code>，保存现场并跳转到内核缺页处理程序。</li>
<li><strong>软件处理</strong>：操作系统通过虚拟地址和页表定位磁盘数据，完成加载。</li>
</ul>
<hr />
<h3 id="4"><strong>4. 优点与缺点</strong></h3>
<table>
<thead>
<tr>
<th><strong>优点</strong></th>
<th><strong>缺点</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>减少内存占用（仅加载必要页面）</td>
<td>缺页处理引入延迟（需磁盘I/O）</td>
</tr>
<tr>
<td>加速程序启动（无需加载全部代码）</td>
<td>频繁缺页导致抖动（Thrashing）</td>
</tr>
<tr>
<td>支持运行大于物理内存的程序</td>
<td>需高效置换算法避免性能下降</td>
</tr>
</tbody>
</table>
<h3 id="_5"><strong>性能优化</strong></h3>
<ul>
<li><strong>预取（Prefetching）</strong>：预测即将访问的页面并提前加载（如程序启动时预读代码段）。</li>
<li><strong>TLB（快表）</strong>：缓存常用页表项，减少地址转换开销。</li>
<li><strong>写时复制（Copy-on-Write）</strong>：延迟页面复制，直到真正修改时触发缺页（用于<code>fork()</code>创建子进程）。</li>
</ul>
<h2 id="copy-on-write">写时复制（copy on write）</h2>
<p>写时复制（Copy-on-Write, CoW）是一种内存管理优化技术，核心思想是多个进程共享同一份物理内存页，直到某个进程尝试修改该页时，才真正复制该页并分配新的物理内存。通过延迟复制的策略，CoW显著减少了内存冗余和进程创建的开销，广泛应用于操作系统的进程创建（如fork()）和内存共享场景。</p>
<p>核心流程</p>
<ul>
<li>共享初始状态：</li>
</ul>
<p>父进程与子进程共享所有物理内存页，页表项标记为只读（即使原页可写）。</p>
<p>共享页的引用计数（Reference Count）增加，表示多个进程正在使用。</p>
<ul>
<li>触发写操作：</li>
</ul>
<p>当任一进程（父或子）尝试写入共享页时，触发缺页异常（因页表项为只读）。</p>
<ul>
<li>操作系统接管处理流程：</li>
</ul>
<p>检查该页是否为CoW页（通过标志位或元数据）。</p>
<p>复制物理页，为写入进程分配新物理页，更新其页表项为可写。</p>
<p>原共享页的引用计数减1，若为0则释放。</p>
<ul>
<li>后续访问：</li>
</ul>
<p>修改后的进程使用独立副本，原进程继续共享未修改的页。</p>
<h2 id="swap-space">内存交换分区（swap space）</h2>
<p>内存交换分区（Swap Space）是操作系统用于扩展物理内存（RAM）的一种机制。它通过将部分内存数据临时存储到硬盘上的专用区域（称为<em>交换分区</em>或交换文件），来缓解物理内存不足的问题，确保系统在内存资源紧张时仍能稳定运行。</p>
<h3 id="_6"><strong>核心作用</strong></h3>
<ol>
<li><strong>扩展可用内存</strong><br />
   当物理内存不足时，操作系统将暂时不活跃的内存页（内存数据单元）移动到交换分区，腾出物理内存供急需的程序使用。</li>
<li><strong>支持休眠（Hibernate）</strong><br />
   休眠时，系统会将内存的完整内容写入交换分区，以便恢复时快速加载。</li>
<li><strong>防止内存耗尽（OOM）</strong><br />
   避免因内存不足直接触发内核的“Out-of-Memory Killer”强制终止进程。</li>
</ol>
<h3 id="_7"><strong>工作原理</strong></h3>
<ol>
<li><strong>页面置换（Paging）</strong><br />
   内核通过算法（如LRU，最近最少使用）选择不活跃的内存页，将其写入交换分区，并标记原物理内存区域为可重用。</li>
<li><strong>按需换入（Swap-in）</strong><br />
   当程序访问已被换出的页面时，系统将其从交换分区重新加载到物理内存（可能触发磁盘I/O延迟）。</li>
</ol>
<h3 id="_8"><strong>典型使用场景</strong></h3>
<ol>
<li><strong>物理内存不足</strong><br />
   当程序申请的内存超过物理RAM容量时，系统自动使用交换空间。</li>
<li><strong>处理内存峰值</strong><br />
   即使物理内存充足，交换空间可应对突发性内存需求高峰。</li>
<li><strong>长期空闲进程</strong><br />
   后台进程的内存可能被换出，释放物理内存给活跃进程。</li>
</ol>
<h3 id="_9"><strong>优缺点对比</strong></h3>
<table>
<thead>
<tr>
<th><strong>优点</strong></th>
<th><strong>缺点</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>防止内存耗尽导致系统崩溃</td>
<td>硬盘速度远慢于内存（机械硬盘尤甚）</td>
</tr>
<tr>
<td>允许运行更多或更大的程序</td>
<td>频繁交换（Swapping）会显著降低性能</td>
</tr>
<tr>
<td>支持休眠功能</td>
<td>固态硬盘（SSD）频繁写入可能缩短寿命</td>
</tr>
</tbody>
</table>
<h2 id="page-replacement">页替换（Page replacement）</h2>
<p><strong>页替换（Page Replacement）</strong> 是操作系统内存管理中的核心机制，用于在物理内存不足时，选择合适的页面（Page）从内存换出到交换空间（Swap Space），以腾出空间加载新页面。其目标是尽可能减少因缺页中断（Page Fault）导致的性能损失，同时保证系统稳定运行。</p>
<ul>
<li><strong>为什么需要页替换？</strong></li>
<li><strong>物理内存有限</strong>：当进程申请的内存超过物理内存容量时，需通过换出非活跃页面来腾出空间。</li>
<li><strong>虚拟内存支持</strong>：虚拟内存机制允许进程使用比物理内存更大的地址空间，依赖页替换实现动态映射。</li>
<li><strong>多任务优化</strong>：通过换出后台进程的页面，优先为活跃进程分配内存。</li>
</ul>
<hr />
<h3 id="_10"><strong>页替换算法</strong></h3>
<p>以下是常见的页替换算法及其特点：</p>
<table>
<thead>
<tr>
<th><strong>算法</strong></th>
<th><strong>描述</strong></th>
<th><strong>优点</strong></th>
<th><strong>缺点</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>最优置换（OPT）</strong></td>
<td>换出未来最长时间不再被访问的页面（理论最优）</td>
<td>命中率最高（理想情况）</td>
<td>无法实现（需预知未来访问顺序）</td>
</tr>
<tr>
<td><strong>先进先出（FIFO）</strong></td>
<td>换出最早进入内存的页面</td>
<td>实现简单</td>
<td>可能淘汰高频访问页面（Belady异常）</td>
</tr>
<tr>
<td><strong>最近最少使用（LRU）</strong></td>
<td>换出最长时间未被访问的页面</td>
<td>接近OPT的实际效果</td>
<td>实现复杂（需维护访问时间戳或链表）</td>
</tr>
<tr>
<td><strong>时钟算法（Clock）</strong></td>
<td>环形链表模拟LRU，通过“使用位”标记页面是否被访问</td>
<td>低开销，近似LRU</td>
<td>命中率略低于LRU</td>
</tr>
<tr>
<td><strong>最不常用（LFU）</strong></td>
<td>换出访问频率最低的页面</td>
<td>适合访问模式稳定的场景</td>
<td>对突发访问敏感，需维护计数器</td>
</tr>
<tr>
<td><strong>工作集算法（WS）</strong></td>
<td>基于局部性原理，保留进程当前工作集内的页面</td>
<td>符合程序运行规律</td>
<td>需动态跟踪工作集，开销较大</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="_11"><strong>算法对比示例</strong></h3>
<p>假设页面访问序列为：<code>1, 2, 3, 4, 1, 2, 5, 1, 2, 3, 4, 5</code>，物理内存容量为3页：</p>
<h4 id="fifo"><strong>FIFO</strong></h4>
<table>
<thead>
<tr>
<th>访问序列</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>1</th>
<th>2</th>
<th>5</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
</tr>
</thead>
<tbody>
<tr>
<td>内存状态</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td><strong>4</strong></td>
<td>4</td>
<td>4</td>
<td><strong>5</strong></td>
<td>5</td>
<td>5</td>
<td><strong>3</strong></td>
<td><strong>4</strong></td>
<td>4</td>
</tr>
<tr>
<td>缺页</td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
</tr>
</tbody>
</table>
<p><strong>缺页次数</strong>：9次（Belady异常明显：淘汰后面就要访问的页面）</p>
<p>Belady异常可能会导致页数越多时，发生page faults的次数却不会越少。</p>
<h4 id="lru"><strong>LRU</strong></h4>
<table>
<thead>
<tr>
<th>访问序列</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>1</th>
<th>2</th>
<th>5</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
</tr>
</thead>
<tbody>
<tr>
<td>内存状态</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td><strong>4</strong></td>
<td>4</td>
<td>4</td>
<td><strong>5</strong></td>
<td>5</td>
<td>5</td>
<td><strong>3</strong></td>
<td><strong>4</strong></td>
<td>4</td>
</tr>
<tr>
<td>缺页</td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
</tr>
</tbody>
</table>
<p><strong>缺页次数</strong>：8次（优于FIFO）</p>
<h4 id="clock"><strong>Clock算法</strong></h4>
<p>通过环形链表和“使用位”标记，定期清除使用位，优先淘汰未被访问的页面。命中率接近LRU，但实现更高效。</p>
<hr />
<h3 id="linux"><strong>实际系统中的页替换（以Linux为例）</strong></h3>
<ol>
<li><strong>双链表策略</strong>：<br />
   Linux使用<code>active_list</code>和<code>inactive_list</code>两个链表，基于页面活跃性管理：  </li>
<li>页面首次载入时进入<code>active_list</code>。  </li>
<li>定期扫描将不活跃页面移至<code>inactive_list</code>。  </li>
<li>
<p>缺页时优先从<code>inactive_list</code>淘汰页面。  </p>
</li>
<li>
<p><strong>交换倾向（Swappiness）</strong>：<br />
   通过<code>/proc/sys/vm/swappiness</code>（默认值60）控制内核换出页面的积极性：  </p>
</li>
<li>值越高，越倾向于换出页面。  </li>
<li>
<p>值设为0时，尽量保留物理内存（除非内存耗尽）。  </p>
</li>
<li>
<p><strong>LRU近似实现</strong>：<br />
   使用“第二次机会”策略（类似Clock算法），结合页面访问标志位（<code>PG_referenced</code>）动态调整活跃性。</p>
</li>
</ol>
<h3 id="_12"><strong>页替换的性能影响</strong></h3>
<ol>
<li><strong>缺页中断开销</strong>：  </li>
<li><strong>硬缺页（Hard Fault）</strong>：需从磁盘加载页面，延迟高（ms级）。  </li>
<li>
<p><strong>软缺页（Soft Fault）</strong>：页面仍在内存中（如共享库），延迟低（μs级）。  </p>
</li>
<li>
<p><strong>交换抖动（Thrashing）</strong>：<br />
   当频繁换入/换出页面时，系统时间主要消耗在I/O操作上，导致性能急剧下降。<br />
<strong>解决方案</strong>：  </p>
</li>
<li>增加物理内存。  </li>
<li>调整进程优先级或限制内存使用（如<code>cgroups</code>）。  </li>
<li>优化程序的内存访问模式（减少随机访问）。</li>
</ol>
<h2 id="allocations-of-frames">帧分配（Allocations of frames）</h2>
<p>指将物理内存的页帧（Frame）分配给不同进程的策略。它的核心目标是平衡内存资源的使用效率与进程的公平性，确保系统在多任务环境下高效运行。</p>
<h2 id="thrashing">抖动（Thrashing）</h2>
<h3 id="1-thrashing"><strong>1. Thrashing的定义</strong></h3>
<p>当物理内存（RAM）不足以容纳所有活跃进程的工作集（Working Set，即进程最近频繁访问的页面集合）时，操作系统会频繁将页面换入（Swap-in）和换出（Swap-out）。此时，系统的大部分时间用于处理缺页中断（Page Fault）和磁盘I/O操作，而非执行实际任务，导致整体性能急剧下降。
goi</p>
<h3 id="2_1"><strong>2. 发生原因</strong></h3>
<table>
<thead>
<tr>
<th><strong>原因</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>物理内存不足</strong></td>
<td>进程总需求内存超过RAM容量，迫使系统依赖交换空间（Swap Space）。</td>
</tr>
<tr>
<td><strong>多道程序过度并发</strong></td>
<td>同时运行过多进程，每个进程分配到的帧数不足，无法维持其工作集。</td>
</tr>
<tr>
<td><strong>低效的置换算法</strong></td>
<td>如FIFO可能误换出高频页面，导致频繁换回（如Belady异常）。</td>
</tr>
<tr>
<td><strong>工作集突变</strong></td>
<td>进程突然访问大量新页面（如数据库查询高峰），超出当前分配的帧数。</td>
</tr>
</tbody>
</table>
<h3 id="3_1"><strong>3. 影响</strong></h3>
<ul>
<li><strong>CPU利用率骤降</strong>：CPU因等待I/O常处于空闲状态（<code>%wa</code>值高）。</li>
<li><strong>响应延迟增加</strong>：用户请求处理时间显著延长。</li>
<li><strong>磁盘I/O过载</strong>：频繁的页面交换导致磁盘带宽饱和（机械硬盘尤其明显）。</li>
<li><strong>系统不稳定</strong>：可能触发OOM Killer（Linux）强制终止进程。</li>
</ul>
<h3 id="5"><strong>5. 解决方案</strong></h3>
<h4 id="1_1"><strong>(1) 短期缓解</strong></h4>
<ul>
<li><strong>减少并发进程数</strong>：暂停非关键任务（如<code>kill</code>低优先级进程）。</li>
<li><strong>调整交换倾向</strong>（Linux）：</li>
</ul>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>sysctl<span class="w"> </span>vm.swappiness<span class="o">=</span><span class="m">10</span><span class="w">  </span><span class="c1"># 降低换出倾向（默认60）</span>
</span></code></pre></div>
<ul>
<li><strong>释放缓存</strong>：  </li>
</ul>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>sync<span class="p">;</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="m">3</span><span class="w"> </span>&gt;<span class="w"> </span>/proc/sys/vm/drop_caches<span class="w">  </span><span class="c1"># 清除PageCache、dentries和inodes</span>
</span></code></pre></div>
<h4 id="2_2"><strong>(2) 长期优化</strong></h4>
<ul>
<li><strong>扩展物理内存</strong>：最直接的硬件升级方案。</li>
<li><strong>优化程序内存使用</strong>：减少内存泄漏，改进数据局部性（如分块处理大数据）。</li>
<li><strong>使用高效置换算法</strong>：如LRU-K或工作集时钟算法（Clock with Working Set）。</li>
<li><strong>调整进程优先级</strong>：通过<code>nice</code>或<code>cgroups</code>限制内存密集型进程的资源使用。</li>
</ul>
<h4 id="3_2"><strong>(3) 系统级策略</strong></h4>
<ul>
<li><strong>工作集模型动态分配</strong>：跟踪进程的工作集大小，动态调整分配的帧数。</li>
<li><strong>负载均衡</strong>：分布式系统中将任务分散到多台服务器，避免单机过载。</li>
<li><strong>使用SSD交换分区</strong>：若必须使用交换空间，SSD可减少I/O延迟（但需注意写入寿命）。</li>
</ul>
<h3 id="7-belady"><strong>7. 与Belady异常的区别</strong></h3>
<table>
<thead>
<tr>
<th><strong>Thrashing</strong></th>
<th><strong>Belady异常</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>系统级内存过载导致性能下降</td>
<td>FIFO算法缺陷，增加帧数反而缺页率升高</td>
</tr>
<tr>
<td>与并发量和内存需求相关</td>
<td>特定置换算法下的理论问题</td>
</tr>
<tr>
<td>需全局资源调整</td>
<td>需更换置换算法（如改用LRU或Clock）</td>
</tr>
</tbody>
</table>
<h2 id="_13">内核内存分配</h2>
<p><strong>内核内存分配</strong> 是操作系统的核心功能之一，负责管理内核空间的内存资源，确保内核自身及内核模块的高效运行。与用户态内存分配（如<code>malloc</code>）不同，内核内存分配需要更高的安全性和实时性，且直接操作物理内存和虚拟内存的底层机制。以下是内核内存分配的详细解析：</p>
<h3 id="1_2"><strong>1. 内核内存分配与用户态分配的区别</strong></h3>
<table>
<thead>
<tr>
<th><strong>特性</strong></th>
<th><strong>内核内存分配</strong></th>
<th><strong>用户态内存分配</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>权限</strong></td>
<td>直接操作物理内存和内核地址空间</td>
<td>通过系统调用（如<code>brk</code>、<code>mmap</code>）申请虚拟内存</td>
</tr>
<tr>
<td><strong>分配器</strong></td>
<td>使用伙伴系统（Buddy System）、Slab/Slub分配器</td>
<td>使用<code>malloc</code>、<code>free</code>（基于<code>glibc</code>的ptmalloc等）</td>
</tr>
<tr>
<td><strong>内存类型</strong></td>
<td>物理连续内存（<code>kmalloc</code>）或虚拟连续内存（<code>vmalloc</code>）</td>
<td>通常是虚拟连续内存</td>
</tr>
<tr>
<td><strong>错误处理</strong></td>
<td>分配失败可能导致内核崩溃（需严格检查返回值）</td>
<td>返回<code>NULL</code>，进程可捕获错误</td>
</tr>
<tr>
<td><strong>实时性</strong></td>
<td>支持原子上下文分配（如中断处理）</td>
<td>只能在进程上下文中运行</td>
</tr>
</tbody>
</table>
<h3 id="2_3"><strong>2. 内核内存分配的核心机制</strong></h3>
<h4 id="1-buddy-system"><strong>(1) 伙伴系统（Buddy System）</strong></h4>
<ul>
<li><strong>作用</strong>：管理物理内存页框（通常以4KB为单位），解决<strong>外部碎片</strong>问题。</li>
<li><strong>原理</strong>：</li>
<li>将空闲内存划分为不同大小的块（如2^0, 2^1, ..., 2^10页），每块称为一个“伙伴”。</li>
<li>分配时，按请求大小找到最接近的块，若无合适块，则分裂更大的块。</li>
<li>释放时，合并相邻空闲块以形成更大的块。</li>
<li><strong>应用场景</strong>：分配大块物理连续内存（如DMA缓冲区.DMA：内存外设与内存之间的直接数据传输而专门分配的内存区域）。</li>
<li><strong>问题</strong>：可能会引入<strong>内部碎片</strong></li>
</ul>
<h4 id="2-slabslubslob"><strong>(2) Slab/Slub/Slob分配器</strong></h4>
<ul>
<li><strong>作用</strong>：高效分配小对象（如<code>task_struct</code>、<code>inode</code>），解决<strong>内部碎片</strong>问题。</li>
<li><strong>原理</strong>：Slab 分配器通过预先分配一定数量的内存块（称为 slab）来提高内存分配和释放的效率。每个 slab 中包含多个对象（例如内核中的数据结构），当需要分配内存时，Slab 分配器从这些对象中获取一个空闲对象，并返回给请求的组件。</li>
<li><strong>Slab</strong>：预分配内存缓存（Cache），每个缓存管理特定大小的对象。</li>
<li><strong>Slub</strong>（Linux默认）：优化Slab，减少元数据开销，支持动态调试。</li>
<li><strong>Slob</strong>：极简实现，适用于嵌入式系统。</li>
<li><strong>示例</strong>：  </li>
</ul>
<div class="language-c highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="c1">// 创建Slab缓存</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="k">struct</span><span class="w"> </span><span class="nc">kmem_cache</span><span class="w"> </span><span class="o">*</span><span class="n">my_cache</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">kmem_cache_create</span><span class="p">(</span><span class="s">&quot;my_cache&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="k">struct</span><span class="w"> </span><span class="nc">my_object</span><span class="p">),</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="c1">// 分配对象</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="k">struct</span><span class="w"> </span><span class="nc">my_object</span><span class="w"> </span><span class="o">*</span><span class="n">obj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">kmem_cache_alloc</span><span class="p">(</span><span class="n">my_cache</span><span class="p">,</span><span class="w"> </span><span class="n">GFP_KERNEL</span><span class="p">);</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="c1">// 释放对象</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="n">kmem_cache_free</span><span class="p">(</span><span class="n">my_cache</span><span class="p">,</span><span class="w"> </span><span class="n">obj</span><span class="p">);</span>
</span></code></pre></div>
<h3 id="3-api"><strong>3. 内核内存分配API</strong></h3>
<h4 id="1-kmalloc-kfree"><strong>(1) <code>kmalloc</code> / <code>kfree</code></strong></h4>
<ul>
<li><strong>特点</strong>：分配<strong>物理连续</strong>的内存块，适用于需要DMA或硬件访问的场景。</li>
<li><strong>示例</strong>：</li>
</ul>
<div class="language-c highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">buf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">kmalloc</span><span class="p">(</span><span class="mi">1024</span><span class="p">,</span><span class="w"> </span><span class="n">GFP_KERNEL</span><span class="p">);</span><span class="w">  </span><span class="c1">// 分配1KB内存</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="n">kfree</span><span class="p">(</span><span class="n">buf</span><span class="p">);</span><span class="w">                             </span><span class="c1">// 释放内存</span>
</span></code></pre></div>
<h4 id="2-vmalloc-vfree"><strong>(2) <code>vmalloc</code> / <code>vfree</code></strong></h4>
<ul>
<li><strong>特点</strong>：分配<strong>虚拟连续但物理不一定连续</strong>的内存，适用于大块内存（如模块加载）。</li>
<li><strong>示例</strong>：</li>
</ul>
<div class="language-c highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">addr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">vmalloc</span><span class="p">(</span><span class="mi">8192</span><span class="p">);</span><span class="w">  </span><span class="c1">// 分配8KB虚拟连续内存</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="n">vfree</span><span class="p">(</span><span class="n">addr</span><span class="p">);</span><span class="w">                 </span><span class="c1">// 释放内存</span>
</span></code></pre></div>
<h4 id="3-get_free_pages"><strong>(3) <code>get_free_pages</code></strong></h4>
<ul>
<li><strong>特点</strong>：直接分配连续的物理页框（以页为单位）。</li>
<li><strong>示例</strong>：</li>
</ul>
<div class="language-c highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="kt">unsigned</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">pages</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">get_free_pages</span><span class="p">(</span><span class="n">GFP_KERNEL</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">);</span><span class="w">  </span><span class="c1">// 分配2^3=8页（32KB）</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="n">free_pages</span><span class="p">(</span><span class="n">pages</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">);</span>
</span></code></pre></div>
<h3 id="4_1"><strong>4. 内核内存分配策略与优化</strong></h3>
<h4 id="1_3"><strong>(1) 内存碎片处理</strong></h4>
<ul>
<li><strong>外部碎片</strong>：通过伙伴系统的合并机制缓解。</li>
<li><strong>内部碎片</strong>：Slab分配器按对象大小精确分配。</li>
</ul>
<h4 id="2-kswapd"><strong>(2) 内存回收（kswapd）</strong></h4>
<ul>
<li><strong>后台守护进程</strong>：定期扫描并回收空闲页框。</li>
<li><strong>LRU链表</strong>：将页面分为活跃（Active）和非活跃（Inactive）链表，优先回收非活跃页。</li>
</ul>
<h4 id="3-oomout-of-memory"><strong>(3) OOM（Out-Of-Memory）处理</strong></h4>
<ul>
<li><strong>触发条件</strong>：物理内存和交换空间均耗尽。</li>
<li><strong>OOM Killer</strong>：选择占用内存多且优先级低的进程终止（通过<code>oom_score</code>计算）。</li>
</ul>
<hr />
<h3 id="5_1"><strong>5. 调试与监控工具</strong></h3>
<h4 id="1-procmeminfo"><strong>(1) <code>/proc/meminfo</code></strong></h4>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>cat<span class="w"> </span>/proc/meminfo<span class="w">  </span><span class="c1"># 查看内核内存使用详情（Slab、PageTables等）</span>
</span></code></pre></div>
<h4 id="2-procslabinfo"><strong>(2) <code>/proc/slabinfo</code></strong></h4>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>cat<span class="w"> </span>/proc/slabinfo<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span><span class="s2">&quot;kmalloc&quot;</span><span class="w">  </span><span class="c1"># 查看Slab缓存分配情况</span>
</span></code></pre></div>
<h4 id="3-vmstat"><strong>(3) <code>vmstat</code></strong></h4>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>vmstat<span class="w"> </span><span class="m">1</span><span class="w">  </span><span class="c1"># 监控内存、交换、缺页等实时数据</span>
</span></code></pre></div>
<h4 id="4-kmemleak"><strong>(4) <code>kmemleak</code>（内核内存泄漏检测）</strong></h4>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="nb">echo</span><span class="w"> </span>scan<span class="w"> </span>&gt;<span class="w"> </span>/sys/kernel/debug/kmemleak<span class="w">  </span><span class="c1"># 扫描内存泄漏</span>
</span></code></pre></div>
<hr />
<h3 id="6"><strong>6. 实际案例：内核模块中的内存分配</strong></h3>
<div class="language-c highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;linux/module.h&gt;</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;linux/kernel.h&gt;</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;linux/slab.h&gt;</span>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="k">static</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">buffer</span><span class="p">;</span>
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a>
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="k">static</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">__init</span><span class="w"> </span><span class="nf">my_module_init</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-10-8"><a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a><span class="w">    </span><span class="n">buffer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">kmalloc</span><span class="p">(</span><span class="mi">1024</span><span class="p">,</span><span class="w"> </span><span class="n">GFP_KERNEL</span><span class="p">);</span>
</span><span id="__span-10-9"><a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">buffer</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-10-10"><a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a><span class="w">        </span><span class="n">printk</span><span class="p">(</span><span class="n">KERN_ERR</span><span class="w"> </span><span class="s">&quot;Failed to allocate memory</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-10-11"><a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="o">-</span><span class="n">ENOMEM</span><span class="p">;</span>
</span><span id="__span-10-12"><a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-10-13"><a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a><span class="w">    </span><span class="n">printk</span><span class="p">(</span><span class="n">KERN_INFO</span><span class="w"> </span><span class="s">&quot;Allocated 1KB buffer at %p</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">buffer</span><span class="p">);</span>
</span><span id="__span-10-14"><a id="__codelineno-10-14" name="__codelineno-10-14" href="#__codelineno-10-14"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-10-15"><a id="__codelineno-10-15" name="__codelineno-10-15" href="#__codelineno-10-15"></a><span class="p">}</span>
</span><span id="__span-10-16"><a id="__codelineno-10-16" name="__codelineno-10-16" href="#__codelineno-10-16"></a>
</span><span id="__span-10-17"><a id="__codelineno-10-17" name="__codelineno-10-17" href="#__codelineno-10-17"></a><span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="n">__exit</span><span class="w"> </span><span class="nf">my_module_exit</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-10-18"><a id="__codelineno-10-18" name="__codelineno-10-18" href="#__codelineno-10-18"></a><span class="w">    </span><span class="n">kfree</span><span class="p">(</span><span class="n">buffer</span><span class="p">);</span>
</span><span id="__span-10-19"><a id="__codelineno-10-19" name="__codelineno-10-19" href="#__codelineno-10-19"></a><span class="w">    </span><span class="n">printk</span><span class="p">(</span><span class="n">KERN_INFO</span><span class="w"> </span><span class="s">&quot;Memory freed</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-10-20"><a id="__codelineno-10-20" name="__codelineno-10-20" href="#__codelineno-10-20"></a><span class="p">}</span>
</span><span id="__span-10-21"><a id="__codelineno-10-21" name="__codelineno-10-21" href="#__codelineno-10-21"></a>
</span><span id="__span-10-22"><a id="__codelineno-10-22" name="__codelineno-10-22" href="#__codelineno-10-22"></a><span class="n">module_init</span><span class="p">(</span><span class="n">my_module_init</span><span class="p">);</span>
</span><span id="__span-10-23"><a id="__codelineno-10-23" name="__codelineno-10-23" href="#__codelineno-10-23"></a><span class="n">module_exit</span><span class="p">(</span><span class="n">my_module_exit</span><span class="p">);</span>
</span><span id="__span-10-24"><a id="__codelineno-10-24" name="__codelineno-10-24" href="#__codelineno-10-24"></a><span class="n">MODULE_LICENSE</span><span class="p">(</span><span class="s">&quot;GPL&quot;</span><span class="p">);</span>
</span></code></pre></div>
<hr />
<h3 id="7"><strong>7. 总结</strong></h3>
<p>内核内存分配是操作系统资源管理的基石，其核心在于：
- <strong>伙伴系统</strong>管理物理页框，解决外部碎片。
- <strong>Slab分配器</strong>优化小对象分配，减少内部碎片。
- <strong>GFP标志</strong>控制分配行为（如原子性与内存区域）。
- 工具链（如<code>vmstat</code>、<code>/proc</code>文件系统）帮助监控与调试。</p>







  
  






  <h2 id="__comments">Comments</h2>
  <!-- Insert generated snippet here -->
  <script src="https://giscus.app/client.js"
  data-repo="SHenpengYU01/giscus-mkdocs-material"
  data-repo-id="R_kgDON4O90g"
  data-category="Announcements"
  data-category-id="DIC_kwDON4O90s4Cm5B_"
  data-mapping="pathname"
  data-strict="0"
  data-reactions-enabled="1"
  data-emit-metadata="0"
  data-input-position="bottom"
  data-theme="dark"
  data-lang="en"
  crossorigin="anonymous"
  async>
</script>

  <!-- Synchronize Giscus theme with palette -->
  <script>
    var giscus = document.querySelector("script[src*=giscus]")

    // Set palette on initial load
    var palette = __md_get("__palette")
    if (palette && typeof palette.color === "object") {
      var theme = palette.color.scheme === "slate"
        ? "transparent_dark"
        : "light"

      // Instruct Giscus to set theme
      giscus.setAttribute("data-theme", theme) 
    }

    // Register event handlers after documented loaded
    document.addEventListener("DOMContentLoaded", function() {
      var ref = document.querySelector("[data-md-component=palette]")
      ref.addEventListener("change", function() {
        var palette = __md_get("__palette")
        if (palette && typeof palette.color === "object") {
          var theme = palette.color.scheme === "slate"
            ? "transparent_dark"
            : "light"

          // Instruct Giscus to change theme
          var frame = document.querySelector(".giscus-frame")
          frame.contentWindow.postMessage(
            { giscus: { setConfig: { theme } } },
            "https://giscus.app"
          )
        }
      })
    })
  </script>

                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2024-2025 Cool Tea <a href="#__consent">Change cookie settings</a>
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            


  


<h4>Cookie consent</h4>
<p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p>
<input class="md-toggle" type="checkbox" id="__settings" >
<div class="md-consent__settings">
  <ul class="task-list">
    
    
      
    
    
      
        
  
  
    
    
  
  <li class="task-list-item">
    <label class="task-list-control">
      <input type="checkbox" name="github" checked>
      <span class="task-list-indicator"></span>
      GitHub
    </label>
  </li>

      
    
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">Accept</button>
    
    
    
  
    
    
    
      <label class="md-button" for="__settings">Manage settings</label>
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script>
    
    
      
      <script id="__config" type="application/json">{"base": "../../../..", "features": ["navigation.tabs", "navigation.instant", "navigation.instant.prefectch", "navigation.instant.progress", "navigation.tracking", "navigation.indexes", "navigation.path", "navigation.top", "instant", "content.code.annotate", "content.code.copy", "content.code.copy_button", "content.code.select"], "search": "../../../../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
        <script src="../../../../js/custom.js"></script>
      
        <script src="../../../../js/katex.js"></script>
      
        <script src="https://unpkg.com/katex@0/dist/katex.min.js"></script>
      
        <script src="https://unpkg.com/katex@0/dist/contrib/auto-render.min.js"></script>
      
    
  </body>
</html>