
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A site for learning and sharing.">
      
      
      
        <link rel="canonical" href="https://note.mythlogos.top/study/cs/sys3/virtual-memory/">
      
      
        <link rel="prev" href="../memory/">
      
      
        <link rel="next" href="../../../network/">
      
      
      <link rel="icon" href="../../../../img/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.3">
    
    
      
        <title>Virtual Memory - Cool Tea</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.d7758b05.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="https://unpkg.com/katex@0/dist/katex.min.css">
    
      <link rel="stylesheet" href="../../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="youtube" data-md-color-primary="blue-grey" data-md-color-accent="blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#main-memory" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../.." title="Cool Tea" class="md-header__button md-logo" aria-label="Cool Tea" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 19h16v2H4zM20 8V5h-2v3zm0-5c.6 0 1 .2 1.4.6s.6.9.6 1.4v3c0 .6-.2 1-.6 1.4s-.8.6-1.4.6h-2v3c0 1.1-.4 2-1.2 2.8S15.1 17 14 17H8c-1.1 0-2-.4-2.8-1.2S4 14.1 4 13V3h5v2.4L7.2 6.8c-.1.1-.2.3-.2.4v4.3c0 .3.2.5.5.5h4c.3 0 .5-.2.5-.5V7.2c0-.2-.1-.3-.2-.4L10 5.4V3z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Cool Tea
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Virtual Memory
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="youtube" data-md-color-primary="blue-grey" data-md-color-accent="blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="blue-grey" data-md-color-accent="blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256l137.3-137.4c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/SHenpengYU01" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    cool-tea
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../math/" class="md-tabs__link">
          
  
    
  
  Maths

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
    
  
  Computer Science

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../ailogic/" class="md-tabs__link">
          
  
    
  
  AI

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../oop/" class="md-tabs__link">
          
  
    
  
  Programming

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../about/" class="md-tabs__link">
        
  
    
  
  About

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../link/" class="md-tabs__link">
        
  
    
  
  Links

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="Cool Tea" class="md-nav__button md-logo" aria-label="Cool Tea" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 19h16v2H4zM20 8V5h-2v3zm0-5c.6 0 1 .2 1.4.6s.6.9.6 1.4v3c0 .6-.2 1-.6 1.4s-.8.6-1.4.6h-2v3c0 1.1-.4 2-1.2 2.8S15.1 17 14 17H8c-1.1 0-2-.4-2.8-1.2S4 14.1 4 13V3h5v2.4L7.2 6.8c-.1.1-.2.3-.2.4v4.3c0 .3.2.5.5.5h4c.3 0 .5-.2.5-.5V7.2c0-.2-.1-.3-.2-.4L10 5.4V3z"/></svg>

    </a>
    Cool Tea
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/SHenpengYU01" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    cool-tea
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../math/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Maths
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Maths
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../math/linear%20algebra/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Linear Algebra
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            Linear Algebra
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../math/linear%20algebra/linear%20algebra/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Startup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../math/linear%20algebra/SVD/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SVD
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../math/maths%20analysis/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Mathematics Analysis
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Mathematics Analysis
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../math/maths%20analysis/maths%20analysis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Startup
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../math/discrete/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Discrete Mathematics
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            Discrete Mathematics
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../math/discrete/discrete%20maths/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Startup
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../math/probability/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Probability Theory
    
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5">
            <span class="md-nav__icon md-icon"></span>
            Probability Theory
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Computer Science
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Computer Science
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../sys2/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Computer system2
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Computer system2
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sys2/sys2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Summary
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Computer system3
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            Computer system3
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../quantitative/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quantitative Approaches
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ILP/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Instruction Level Parallelism
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cache/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cache
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../memory/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Memory
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Virtual Memory
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Virtual Memory
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#fragment" class="md-nav__link">
    <span class="md-ellipsis">
      碎片（fragment）
    </span>
  </a>
  
    <nav class="md-nav" aria-label="碎片（fragment）">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-internal-fragmentation" class="md-nav__link">
    <span class="md-ellipsis">
      1. 内部碎片（Internal Fragmentation）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-external-fragmentation" class="md-nav__link">
    <span class="md-ellipsis">
      2. 外部碎片（External Fragmentation）
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#page-frame" class="md-nav__link">
    <span class="md-ellipsis">
      页框（page frame）
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#page-table" class="md-nav__link">
    <span class="md-ellipsis">
      页表（page table）
    </span>
  </a>
  
    <nav class="md-nav" aria-label="页表（page table）">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#page-table-entrypte" class="md-nav__link">
    <span class="md-ellipsis">
      页表项（Page Table Entry，PTE）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tlbtranslation-lookaside-buffer" class="md-nav__link">
    <span class="md-ellipsis">
      TLB（Translation Lookaside Buffer）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      内存共享
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hierarchical-page-tables" class="md-nav__link">
    <span class="md-ellipsis">
      分层页表（Hierarchical Page Tables）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hashed-page-table" class="md-nav__link">
    <span class="md-ellipsis">
      哈希页表（Hashed page table）
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#eateffective-access-time" class="md-nav__link">
    <span class="md-ellipsis">
      EAT（effective access time）
    </span>
  </a>
  
    <nav class="md-nav" aria-label="EAT（effective access time）">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#eat" class="md-nav__link">
    <span class="md-ellipsis">
      EAT 的基本公式
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      虚拟内存
    </span>
  </a>
  
    <nav class="md-nav" aria-label="虚拟内存">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#demand-paging" class="md-nav__link">
    <span class="md-ellipsis">
      按需分页（Demand Paging）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    <span class="md-ellipsis">
      1. 工作原理
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. 工作原理">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      核心流程
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    <span class="md-ellipsis">
      2. 具体示例
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. 具体示例">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      步骤分解
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    <span class="md-ellipsis">
      3. 关键数据结构
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. 关键数据结构">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pte" class="md-nav__link">
    <span class="md-ellipsis">
      页表项（PTE）标志位
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      缺页异常处理流程
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4" class="md-nav__link">
    <span class="md-ellipsis">
      4. 优点与缺点
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      性能优化
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#copy-on-write" class="md-nav__link">
    <span class="md-ellipsis">
      写时复制（copy on write）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#swap-space" class="md-nav__link">
    <span class="md-ellipsis">
      内存交换分区（swap space）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      核心作用
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      工作原理
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      典型使用场景
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      配置建议
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      优缺点对比
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#page-replacement" class="md-nav__link">
    <span class="md-ellipsis">
      页替换（Page replacement）
    </span>
  </a>
  
    <nav class="md-nav" aria-label="页替换（Page replacement）">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      页替换算法
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      算法对比示例
    </span>
  </a>
  
    <nav class="md-nav" aria-label="算法对比示例">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fifo" class="md-nav__link">
    <span class="md-ellipsis">
      FIFO
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lru" class="md-nav__link">
    <span class="md-ellipsis">
      LRU
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clock" class="md-nav__link">
    <span class="md-ellipsis">
      Clock算法
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#linux" class="md-nav__link">
    <span class="md-ellipsis">
      实际系统中的页替换（以Linux为例）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      页替换的性能影响
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../network/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Network
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            Network
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../network/introduction/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../network/application%20layer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    The Application Layer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../network/transport%20layer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    The Transport Layer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../network/internet%20layer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    The Internet Layer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../network/link%20layer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    The Link Layer
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    AI
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            AI
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../ailogic/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    AI Logic
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            AI Logic
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ailogic/introduction/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    引论
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ailogic/proposition/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    命题逻辑
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ailogi/first-order logic.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    一阶逻辑
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ailogic/knowledge/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    知识图谱与描述逻辑
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ailogic/default-logic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    缺省逻辑
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Programming
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Programming
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../oop/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    OOP
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5_1" id="__nav_5_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1">
            <span class="md-nav__icon md-icon"></span>
            OOP
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../oop/grammar/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    C++ 基础语法
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../oop/class/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    类
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../oop/struct/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    结构体
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../oop/memory/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    内存
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../oop/stream/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    流
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../oop/container/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    容器
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../oop/friend/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    友元函数
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../oop/overload/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    重载
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../oop/template/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    模版
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../oop/design-pattern/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    设计模式
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Data Structure
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            Data Structure
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../datastructure/graph/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Graph
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../datastructure/midterm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Data Structure
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../datastructure/algorithm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Algorithm
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../datastructure/practice/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Practice
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../about/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../link/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Links
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#fragment" class="md-nav__link">
    <span class="md-ellipsis">
      碎片（fragment）
    </span>
  </a>
  
    <nav class="md-nav" aria-label="碎片（fragment）">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-internal-fragmentation" class="md-nav__link">
    <span class="md-ellipsis">
      1. 内部碎片（Internal Fragmentation）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-external-fragmentation" class="md-nav__link">
    <span class="md-ellipsis">
      2. 外部碎片（External Fragmentation）
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#page-frame" class="md-nav__link">
    <span class="md-ellipsis">
      页框（page frame）
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#page-table" class="md-nav__link">
    <span class="md-ellipsis">
      页表（page table）
    </span>
  </a>
  
    <nav class="md-nav" aria-label="页表（page table）">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#page-table-entrypte" class="md-nav__link">
    <span class="md-ellipsis">
      页表项（Page Table Entry，PTE）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tlbtranslation-lookaside-buffer" class="md-nav__link">
    <span class="md-ellipsis">
      TLB（Translation Lookaside Buffer）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      内存共享
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hierarchical-page-tables" class="md-nav__link">
    <span class="md-ellipsis">
      分层页表（Hierarchical Page Tables）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hashed-page-table" class="md-nav__link">
    <span class="md-ellipsis">
      哈希页表（Hashed page table）
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#eateffective-access-time" class="md-nav__link">
    <span class="md-ellipsis">
      EAT（effective access time）
    </span>
  </a>
  
    <nav class="md-nav" aria-label="EAT（effective access time）">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#eat" class="md-nav__link">
    <span class="md-ellipsis">
      EAT 的基本公式
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      虚拟内存
    </span>
  </a>
  
    <nav class="md-nav" aria-label="虚拟内存">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#demand-paging" class="md-nav__link">
    <span class="md-ellipsis">
      按需分页（Demand Paging）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    <span class="md-ellipsis">
      1. 工作原理
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. 工作原理">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      核心流程
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    <span class="md-ellipsis">
      2. 具体示例
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. 具体示例">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      步骤分解
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    <span class="md-ellipsis">
      3. 关键数据结构
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. 关键数据结构">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pte" class="md-nav__link">
    <span class="md-ellipsis">
      页表项（PTE）标志位
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      缺页异常处理流程
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4" class="md-nav__link">
    <span class="md-ellipsis">
      4. 优点与缺点
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      性能优化
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#copy-on-write" class="md-nav__link">
    <span class="md-ellipsis">
      写时复制（copy on write）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#swap-space" class="md-nav__link">
    <span class="md-ellipsis">
      内存交换分区（swap space）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      核心作用
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      工作原理
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      典型使用场景
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      配置建议
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      优缺点对比
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#page-replacement" class="md-nav__link">
    <span class="md-ellipsis">
      页替换（Page replacement）
    </span>
  </a>
  
    <nav class="md-nav" aria-label="页替换（Page replacement）">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      页替换算法
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      算法对比示例
    </span>
  </a>
  
    <nav class="md-nav" aria-label="算法对比示例">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fifo" class="md-nav__link">
    <span class="md-ellipsis">
      FIFO
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lru" class="md-nav__link">
    <span class="md-ellipsis">
      LRU
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clock" class="md-nav__link">
    <span class="md-ellipsis">
      Clock算法
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#linux" class="md-nav__link">
    <span class="md-ellipsis">
      实际系统中的页替换（以Linux为例）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      页替换的性能影响
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="main-memory">Main memory</h1>
<p>在计算机系统中，<strong>内存碎片</strong>通常分为两种类型：<strong>内部碎片</strong>和<strong>外部碎片</strong>。它们都与内存的分配和使用方式有关，但表现形式和影响不同。</p>
<h2 id="fragment">碎片（fragment）</h2>
<h3 id="1-internal-fragmentation">1. 内部碎片（Internal Fragmentation）</h3>
<p>内部碎片指的是分配给程序或进程的内存块中的“浪费空间”。这种情况发生在内存分配的块大于实际需求时，导致一部分内存未被有效利用。</p>
<h3 id="2-external-fragmentation">2. 外部碎片（External Fragmentation）</h3>
<p>外部碎片是指内存中有多个不连续的空闲块，虽然空闲内存总量足够，但由于这些空闲块并不连续，导致无法分配给大的程序或数据。</p>
<h2 id="page-frame">页框（page frame）</h2>
<ul>
<li>
<p>页框是物理内存的基本分配单位。当操作系统从虚拟内存中请求某一页的内容时，它会将该虚拟页映射到一个物理页框中。</p>
</li>
<li>
<p>页框是物理内存的划分方式，与虚拟页相对应。操作系统通过页表将虚拟地址空间映射到这些物理页框。</p>
</li>
</ul>
<h2 id="page-table">页表（page table）</h2>
<p>页表是操作系统中用于实现虚拟内存与物理内存映射的数据结构。它将虚拟地址空间中的虚拟页（Page）与物理地址空间中的物理页框（Page Frame）建立映射关系。现代系统中，页表通常采用多级结构（如二级页表、三级页表等）来减少内存开销。</p>
<h3 id="page-table-entrypte">页表项（Page Table Entry，PTE）</h3>
<p>每一项通常包含虚拟页到物理页框的映射信息，可能还包含其他控制信息（如权限位、有效位等），具体为：
- 物理页框号（PFN）
- 有效位：有效位为 1 表示该条目有效且页面已经映射到物理内存中
- 权限位（读、写、执行权限等）：通过控制对内存页面的访问权限，实现内存隔离，防止非法访问
- 脏位：标记页面是否被修改。如果页面在内存中被修改过，脏位将被设置为 1。脏位的作用是告知操作系统，页面需要在从内存交换到磁盘时进行写回。
- 引用位：引用位用于表示页面是否在一定时间内被访问过。当页面被访问时，操作系统会将该位设置为 1。这有助于操作系统实现页面替换策略，例如 LRU（Least Recently Used） 替换策略。
- 用户/内核访问控制
- 缓存控制和页大小等</p>
<h3 id="tlbtranslation-lookaside-buffer">TLB（Translation Lookaside Buffer）</h3>
<p>TLB：硬件缓存，存储最近使用的虚拟页到物理页框的映射，以减少每次访问内存时对页表的查询，从而提高内存访问速度。</p>
<ul>
<li>字段：包括页表条目中部分信息</li>
<li>虚拟页号（VPN，Virtual Page Number）：虚拟地址的页号部分，用于查找页表的映射。</li>
<li>物理页框号（PFN，Physical Frame Number）：虚拟页映射到的物理页框号。</li>
<li>标志位：如有效位（valid bit）、权限位（如读/写权限）等。</li>
<li>替换策略信息：如 LRU 计数等，用于决定哪个条目应当被替换。</li>
</ul>
<h3 id="_1">内存共享</h3>
<p>在多个进程之间共享内存时，多个虚拟地址空间可能映射到相同的物理内存页。例如，不同的进程可以通过映射相同的物理内存来共享数据，这样就可以实现进程间的高效数据交换。</p>
<h3 id="hierarchical-page-tables">分层页表（Hierarchical Page Tables）</h3>
<ol>
<li>引入原因：在传统的单层页表（如 单级页表）中，虚拟地址空间的每一页都需要一个对应的物理页面地址，页表本身通常是一个巨大的数据结构，随着虚拟地址空间的增大，页表的大小也会急剧增加，这会导致存储和查找效率的下降。</li>
</ol>
<p>为了解决这一问题，操作系统引入了 分层页表 结构，这样每个页表条目指向下一级页表，最终通过多级结构映射到物理内存。
2. 原理：</p>
<ul>
<li>多级结构：将页表划分为多级（如两级、四级），虚拟地址分段用于各级索引。</li>
</ul>
<p>示例（32位两级页表）：
- 虚拟地址分为：10位页目录索引 + 10位页表索引 + 12位页内偏移。
- 页目录（Page Directory）：1024项，每项指向一个页表（4KB）。
- 页表（Page Table）：1024项，每项指向物理页框（4KB页）。
- 按需分配：仅分配实际使用的页表，未使用的页目录项标记为无效，节省内存。</p>
<p><img src="\img\study\cs\sys3\2-level-page.png"></p>
<h3 id="hashed-page-table">哈希页表（Hashed page table）</h3>
<ul>
<li>
<p>通过使用哈希表来管理虚拟地址到物理地址的映射，特别适合于虚拟地址空间稀疏的场景。它能显著减少内存消耗并提高查找效率，尤其在大虚拟地址空间的情况下。然而，哈希冲突和内存管理的复杂性也可能影响其性能。</p>
</li>
<li>
<p>哈希页表的关键思想是利用哈希表的结构来存储页表项。在哈希页表中，虚拟地址的页号（VPN, Virtual Page Number）通过哈希函数映射到哈希表中的一个桶（bucket）。每个桶包含一个链表，链表中的每个元素存储一个虚拟页号与物理页号之间的映射。</p>
</li>
</ul>
<h2 id="eateffective-access-time">EAT（effective access time）</h2>
<p>即<strong>有效访问时间</strong>，是衡量内存访问延迟的一个指标，尤其是在虚拟内存系统中，综合考虑了 <strong>缓存命中率</strong> 和 <strong>页故障率</strong> 等因素后，计算一次内存访问所需的平均时间。</p>
<p>有效访问时间通常是用来评估操作系统在内存管理中的性能，特别是在分页和虚拟内存环境下。它考虑了 <strong>缓存访问</strong>、<strong>页表查询</strong>、以及 <strong>缺页中断</strong>（<strong>page fault</strong>）等因素。</p>
<h3 id="eat">EAT 的基本公式</h3>
<p>有效访问时间（EAT）可以通过以下公式来计算：</p>
<div class="arithmatex">\[
EAT = (1 - p) \times (T_{hit}) + p \times (T_{fault})
\]</div>
<p>其中：
- <span class="arithmatex">\( p \)</span> 是 <strong>页故障率</strong>（Page Fault Rate），即访问的虚拟地址发生页故障的概率。
- <span class="arithmatex">\( T_{hit} \)</span> 是 <strong>缓存命中的时间</strong>（Time to access memory when there is no page fault），即访问内存时，不发生页故障的时间（通常是对 TLB 或一级缓存的访问时间）。
- <span class="arithmatex">\( T_{fault} \)</span> 是 <strong>页故障时间</strong>（Time to access memory when a page fault occurs），即发生页故障时的访问时间，包括查找页表、磁盘 I/O 等时间。</p>
<h2 id="_2">虚拟内存</h2>
<h3 id="demand-paging">按需分页（Demand Paging）</h3>
<p>按需分页（Demand Paging）是一种虚拟内存管理技术，核心思想是<strong>仅在程序实际需要访问某个页面时，才将其加载到物理内存中</strong>，而非一次性加载全部页面。它通过延迟加载（Lazy Loading）优化内存使用，减少程序启动时间和物理内存占用，是操作系统高效管理内存的核心机制之一。</p>
<h3 id="1"><strong>1. 工作原理</strong></h3>
<h4 id="_3"><strong>核心流程</strong></h4>
<ol>
<li><strong>初始状态</strong>：</li>
<li>程序的可执行文件存储在磁盘（如二进制文件），但<strong>仅加载必要部分到内存</strong>（如代码段头部）。</li>
<li>
<p>页表中大部分页表项的<strong>存在位（Present Bit）</strong>标记为<code>0</code>（表示页面不在内存中）。</p>
</li>
<li>
<p><strong>访问未加载的页面</strong>：</p>
</li>
<li>当程序访问一个标记为“不在内存”的页面时，触发<strong>缺页异常（Page Fault）</strong>。</li>
<li>
<p>操作系统接管处理流程：</p>
<ul>
<li>从磁盘（或交换空间）加载所需页面到物理内存。</li>
<li>更新页表项的存在位和物理页框号。</li>
<li>恢复程序执行，重新执行引发缺页的指令。</li>
</ul>
</li>
<li>
<p><strong>动态管理</strong>：</p>
</li>
<li>若物理内存不足，操作系统通过<strong>页面置换算法</strong>（如LRU、FIFO）淘汰旧页面，腾出空间。</li>
</ol>
<hr />
<h3 id="2"><strong>2. 具体示例</strong></h3>
<p>假设一个程序访问虚拟地址 <code>0x08048000</code>，其映射的物理页面尚未加载到内存。</p>
<h4 id="_4"><strong>步骤分解</strong></h4>
<ol>
<li><strong>触发缺页异常</strong>：</li>
<li>CPU访问虚拟地址 <code>0x08048000</code>，页表项存在位为<code>0</code>。</li>
<li>
<p>硬件触发缺页异常，切换到内核模式。</p>
</li>
<li>
<p><strong>操作系统处理缺页</strong>：</p>
</li>
<li><strong>查询页表项</strong>：确定该虚拟地址对应的磁盘位置（如可执行文件中的偏移）。</li>
<li><strong>分配物理页框</strong>：选择一个空闲页框（如物理地址 <code>0x0000A000</code>）。</li>
<li><strong>加载页面</strong>：将磁盘中 <code>0x08048000</code> 对应的数据（如代码或数据段）复制到物理页框 <code>0x0000A000</code>。</li>
<li>
<p><strong>更新页表</strong>：</p>
<ul>
<li>设置页表项的存在位为<code>1</code>，物理页框号为 <code>0x0000A</code>（高20位）。</li>
<li>更新标志位（如可读写权限）。</li>
</ul>
</li>
<li>
<p><strong>恢复程序执行</strong>：</p>
</li>
<li>CPU重新执行触发缺页的指令，此时页表项已有效，正常完成地址转换。</li>
</ol>
<hr />
<h3 id="3"><strong>3. 关键数据结构</strong></h3>
<h4 id="pte"><strong>页表项（PTE）标志位</strong></h4>
<ul>
<li><strong>存在位（Present Bit）</strong>：1表示页面在内存，0表示在磁盘。</li>
<li><strong>修改位（Dirty Bit）</strong>：1表示页面被修改过，淘汰时需写回磁盘。</li>
<li><strong>访问位（Accessed Bit）</strong>：记录页面是否被访问，用于页面置换算法。</li>
</ul>
<h4 id="_5"><strong>缺页异常处理流程</strong></h4>
<ul>
<li><strong>硬件触发</strong>：CPU检测到存在位为<code>0</code>，保存现场并跳转到内核缺页处理程序。</li>
<li><strong>软件处理</strong>：操作系统通过虚拟地址和页表定位磁盘数据，完成加载。</li>
</ul>
<hr />
<h3 id="4"><strong>4. 优点与缺点</strong></h3>
<table>
<thead>
<tr>
<th><strong>优点</strong></th>
<th><strong>缺点</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>减少内存占用（仅加载必要页面）</td>
<td>缺页处理引入延迟（需磁盘I/O）</td>
</tr>
<tr>
<td>加速程序启动（无需加载全部代码）</td>
<td>频繁缺页导致抖动（Thrashing）</td>
</tr>
<tr>
<td>支持运行大于物理内存的程序</td>
<td>需高效置换算法避免性能下降</td>
</tr>
</tbody>
</table>
<h3 id="_6"><strong>性能优化</strong></h3>
<ul>
<li><strong>预取（Prefetching）</strong>：预测即将访问的页面并提前加载（如程序启动时预读代码段）。</li>
<li><strong>TLB（快表）</strong>：缓存常用页表项，减少地址转换开销。</li>
<li><strong>写时复制（Copy-on-Write）</strong>：延迟页面复制，直到真正修改时触发缺页（用于<code>fork()</code>创建子进程）。</li>
</ul>
<h3 id="copy-on-write">写时复制（copy on write）</h3>
<p>写时复制（Copy-on-Write, CoW）是一种内存管理优化技术，核心思想是多个进程共享同一份物理内存页，直到某个进程尝试修改该页时，才真正复制该页并分配新的物理内存。通过延迟复制的策略，CoW显著减少了内存冗余和进程创建的开销，广泛应用于操作系统的进程创建（如fork()）和内存共享场景。</p>
<p>核心流程
- 共享初始状态：</p>
<p>父进程与子进程共享所有物理内存页，页表项标记为只读（即使原页可写）。</p>
<p>共享页的引用计数（Reference Count）增加，表示多个进程正在使用。</p>
<ul>
<li>触发写操作：</li>
</ul>
<p>当任一进程（父或子）尝试写入共享页时，触发缺页异常（因页表项为只读）。</p>
<ul>
<li>操作系统接管处理流程：</li>
</ul>
<p>检查该页是否为CoW页（通过标志位或元数据）。</p>
<p>复制物理页，为写入进程分配新物理页，更新其页表项为可写。</p>
<p>原共享页的引用计数减1，若为0则释放。</p>
<ul>
<li>后续访问：</li>
</ul>
<p>修改后的进程使用独立副本，原进程继续共享未修改的页。</p>
<h3 id="swap-space">内存交换分区（swap space）</h3>
<p>内存交换分区（Swap Space）是操作系统用于扩展物理内存（RAM）的一种机制。它通过将部分内存数据临时存储到硬盘上的专用区域（称为交换分区或交换文件），来缓解物理内存不足的问题，确保系统在内存资源紧张时仍能稳定运行。</p>
<h3 id="_7"><strong>核心作用</strong></h3>
<ol>
<li><strong>扩展可用内存</strong><br />
   当物理内存不足时，操作系统将暂时不活跃的内存页（内存数据单元）移动到交换分区，腾出物理内存供急需的程序使用。</li>
<li><strong>支持休眠（Hibernate）</strong><br />
   休眠时，系统会将内存的完整内容写入交换分区，以便恢复时快速加载。</li>
<li><strong>防止内存耗尽（OOM）</strong><br />
   避免因内存不足直接触发内核的“Out-of-Memory Killer”强制终止进程。</li>
</ol>
<hr />
<h3 id="_8"><strong>工作原理</strong></h3>
<ol>
<li><strong>页面置换（Paging）</strong><br />
   内核通过算法（如LRU，最近最少使用）选择不活跃的内存页，将其写入交换分区，并标记原物理内存区域为可重用。</li>
<li><strong>按需换入（Swap-in）</strong><br />
   当程序访问已被换出的页面时，系统将其从交换分区重新加载到物理内存（可能触发磁盘I/O延迟）。</li>
</ol>
<hr />
<h3 id="_9"><strong>典型使用场景</strong></h3>
<ol>
<li><strong>物理内存不足</strong><br />
   当程序申请的内存超过物理RAM容量时，系统自动使用交换空间。</li>
<li><strong>处理内存峰值</strong><br />
   即使物理内存充足，交换空间可应对突发性内存需求高峰。</li>
<li><strong>长期空闲进程</strong><br />
   后台进程的内存可能被换出，释放物理内存给活跃进程。</li>
</ol>
<hr />
<h3 id="_10"><strong>配置建议</strong></h3>
<ol>
<li><strong>交换空间大小</strong>  </li>
<li><strong>传统建议</strong>：物理内存的1~2倍（适用于小内存机器，如4GB以下）。  </li>
<li><strong>现代系统</strong>：若内存充足（如16GB+），交换空间可设为1~2GB，主要用于休眠支持或应急。  </li>
<li><strong>服务器场景</strong>：若禁用休眠，可配置少量交换空间（如1GB）以应对突发负载。</li>
<li><strong>优先级设置（Linux）</strong><br />
   多个交换分区/文件可设置不同优先级（<code>pri=N</code>），系统优先使用高优先级区域。</li>
</ol>
<hr />
<h3 id="_11"><strong>优缺点对比</strong></h3>
<table>
<thead>
<tr>
<th><strong>优点</strong></th>
<th><strong>缺点</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>防止内存耗尽导致系统崩溃</td>
<td>硬盘速度远慢于内存（机械硬盘尤甚）</td>
</tr>
<tr>
<td>允许运行更多或更大的程序</td>
<td>频繁交换（Swapping）会显著降低性能</td>
</tr>
<tr>
<td>支持休眠功能</td>
<td>固态硬盘（SSD）频繁写入可能缩短寿命</td>
</tr>
</tbody>
</table>
<h2 id="page-replacement">页替换（Page replacement）</h2>
<p><strong>页替换（Page Replacement）</strong> 是操作系统内存管理中的核心机制，用于在物理内存不足时，选择合适的页面（Page）从内存换出到交换空间（Swap Space），以腾出空间加载新页面。其目标是尽可能减少因缺页中断（Page Fault）导致的性能损失，同时保证系统稳定运行。</p>
<ul>
<li><strong>为什么需要页替换？</strong></li>
<li><strong>物理内存有限</strong>：当进程申请的内存超过物理内存容量时，需通过换出非活跃页面来腾出空间。</li>
<li><strong>虚拟内存支持</strong>：虚拟内存机制允许进程使用比物理内存更大的地址空间，依赖页替换实现动态映射。</li>
<li><strong>多任务优化</strong>：通过换出后台进程的页面，优先为活跃进程分配内存。</li>
</ul>
<hr />
<h3 id="_12"><strong>页替换算法</strong></h3>
<p>以下是常见的页替换算法及其特点：</p>
<table>
<thead>
<tr>
<th><strong>算法</strong></th>
<th><strong>描述</strong></th>
<th><strong>优点</strong></th>
<th><strong>缺点</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>最优置换（OPT）</strong></td>
<td>换出未来最长时间不再被访问的页面（理论最优）</td>
<td>命中率最高（理想情况）</td>
<td>无法实现（需预知未来访问顺序）</td>
</tr>
<tr>
<td><strong>先进先出（FIFO）</strong></td>
<td>换出最早进入内存的页面</td>
<td>实现简单</td>
<td>可能淘汰高频访问页面（Belady异常）</td>
</tr>
<tr>
<td><strong>最近最少使用（LRU）</strong></td>
<td>换出最长时间未被访问的页面</td>
<td>接近OPT的实际效果</td>
<td>实现复杂（需维护访问时间戳或链表）</td>
</tr>
<tr>
<td><strong>时钟算法（Clock）</strong></td>
<td>环形链表模拟LRU，通过“使用位”标记页面是否被访问</td>
<td>低开销，近似LRU</td>
<td>命中率略低于LRU</td>
</tr>
<tr>
<td><strong>最不常用（LFU）</strong></td>
<td>换出访问频率最低的页面</td>
<td>适合访问模式稳定的场景</td>
<td>对突发访问敏感，需维护计数器</td>
</tr>
<tr>
<td><strong>工作集算法（WS）</strong></td>
<td>基于局部性原理，保留进程当前工作集内的页面</td>
<td>符合程序运行规律</td>
<td>需动态跟踪工作集，开销较大</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="_13"><strong>算法对比示例</strong></h3>
<p>假设页面访问序列为：<code>1, 2, 3, 4, 1, 2, 5, 1, 2, 3, 4, 5</code>，物理内存容量为3页：</p>
<h4 id="fifo"><strong>FIFO</strong></h4>
<table>
<thead>
<tr>
<th>访问序列</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>1</th>
<th>2</th>
<th>5</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
</tr>
</thead>
<tbody>
<tr>
<td>内存状态</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td><strong>4</strong></td>
<td>4</td>
<td>4</td>
<td><strong>5</strong></td>
<td>5</td>
<td>5</td>
<td><strong>3</strong></td>
<td><strong>4</strong></td>
<td>4</td>
</tr>
<tr>
<td>缺页</td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
</tr>
</tbody>
</table>
<p><strong>缺页次数</strong>：9次（Belady异常明显：淘汰后面就要访问的页面）</p>
<p>Belady异常可能会导致页数越多时，发生page faults的次数却不会越少。</p>
<h4 id="lru"><strong>LRU</strong></h4>
<table>
<thead>
<tr>
<th>访问序列</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>1</th>
<th>2</th>
<th>5</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
</tr>
</thead>
<tbody>
<tr>
<td>内存状态</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td><strong>4</strong></td>
<td>4</td>
<td>4</td>
<td><strong>5</strong></td>
<td>5</td>
<td>5</td>
<td><strong>3</strong></td>
<td><strong>4</strong></td>
<td>4</td>
</tr>
<tr>
<td>缺页</td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
<td>✔</td>
</tr>
<tr>
<td><strong>缺页次数</strong>：8次（优于FIFO）</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h4 id="clock"><strong>Clock算法</strong></h4>
<p>通过环形链表和“使用位”标记，定期清除使用位，优先淘汰未被访问的页面。命中率接近LRU，但实现更高效。</p>
<hr />
<h3 id="linux"><strong>实际系统中的页替换（以Linux为例）</strong></h3>
<ol>
<li><strong>双链表策略</strong>：<br />
   Linux使用<code>active_list</code>和<code>inactive_list</code>两个链表，基于页面活跃性管理：  </li>
<li>页面首次载入时进入<code>active_list</code>。  </li>
<li>定期扫描将不活跃页面移至<code>inactive_list</code>。  </li>
<li>
<p>缺页时优先从<code>inactive_list</code>淘汰页面。  </p>
</li>
<li>
<p><strong>交换倾向（Swappiness）</strong>：<br />
   通过<code>/proc/sys/vm/swappiness</code>（默认值60）控制内核换出页面的积极性：  </p>
</li>
<li>值越高，越倾向于换出页面。  </li>
<li>
<p>值设为0时，尽量保留物理内存（除非内存耗尽）。  </p>
</li>
<li>
<p><strong>LRU近似实现</strong>：<br />
   使用“第二次机会”策略（类似Clock算法），结合页面访问标志位（<code>PG_referenced</code>）动态调整活跃性。</p>
</li>
</ol>
<hr />
<h3 id="_14"><strong>页替换的性能影响</strong></h3>
<ol>
<li><strong>缺页中断开销</strong>：  </li>
<li><strong>硬缺页（Hard Fault）</strong>：需从磁盘加载页面，延迟高（ms级）。  </li>
<li>
<p><strong>软缺页（Soft Fault）</strong>：页面仍在内存中（如共享库），延迟低（μs级）。  </p>
</li>
<li>
<p><strong>交换抖动（Thrashing）</strong>：<br />
   当频繁换入/换出页面时，系统时间主要消耗在I/O操作上，导致性能急剧下降。<br />
<strong>解决方案</strong>：  </p>
</li>
<li>增加物理内存。  </li>
<li>调整进程优先级或限制内存使用（如<code>cgroups</code>）。  </li>
<li>优化程序的内存访问模式（减少随机访问）。</li>
</ol>







  
  






  <h2 id="__comments">Comments</h2>
  <!-- Insert generated snippet here -->
  <script src="https://giscus.app/client.js"
  data-repo="SHenpengYU01/giscus-mkdocs-material"
  data-repo-id="R_kgDON4O90g"
  data-category="Announcements"
  data-category-id="DIC_kwDON4O90s4Cm5B_"
  data-mapping="pathname"
  data-strict="0"
  data-reactions-enabled="1"
  data-emit-metadata="0"
  data-input-position="bottom"
  data-theme="dark"
  data-lang="en"
  crossorigin="anonymous"
  async>
</script>

  <!-- Synchronize Giscus theme with palette -->
  <script>
    var giscus = document.querySelector("script[src*=giscus]")

    // Set palette on initial load
    var palette = __md_get("__palette")
    if (palette && typeof palette.color === "object") {
      var theme = palette.color.scheme === "slate"
        ? "transparent_dark"
        : "light"

      // Instruct Giscus to set theme
      giscus.setAttribute("data-theme", theme) 
    }

    // Register event handlers after documented loaded
    document.addEventListener("DOMContentLoaded", function() {
      var ref = document.querySelector("[data-md-component=palette]")
      ref.addEventListener("change", function() {
        var palette = __md_get("__palette")
        if (palette && typeof palette.color === "object") {
          var theme = palette.color.scheme === "slate"
            ? "transparent_dark"
            : "light"

          // Instruct Giscus to change theme
          var frame = document.querySelector(".giscus-frame")
          frame.contentWindow.postMessage(
            { giscus: { setConfig: { theme } } },
            "https://giscus.app"
          )
        }
      })
    })
  </script>

                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2024-2025 Cool Tea <a href="#__consent">Change cookie settings</a>
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            


  
    
  



  


<h4>Cookie consent</h4>
<p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p>
<input class="md-toggle" type="checkbox" id="__settings" >
<div class="md-consent__settings">
  <ul class="task-list">
    
      
      
        
        
      
      <li class="task-list-item">
        <label class="task-list-control">
          <input type="checkbox" name="github" checked>
          <span class="task-list-indicator"></span>
          GitHub
        </label>
      </li>
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">Accept</button>
    
    
    
  
    
    
    
      <label class="md-button" for="__settings">Manage settings</label>
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script>
    
    <script id="__config" type="application/json">{"base": "../../../..", "features": ["navigation.tabs", "navigation.instant", "navigation.instant.prefectch", "navigation.instant.progress", "navigation.tracking", "navigation.indexes", "navigation.path", "navigation.top", "instant", "content.code.annotate", "content.code.copy", "content.code.copy_button"], "search": "../../../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.f1b6f286.min.js"></script>
      
        <script src="../../../../js/custom.js"></script>
      
        <script src="../../../../js/katex.js"></script>
      
        <script src="https://unpkg.com/katex@0/dist/katex.min.js"></script>
      
        <script src="https://unpkg.com/katex@0/dist/contrib/auto-render.min.js"></script>
      
    
  </body>
</html>